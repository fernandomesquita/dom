{
  "query": "CREATE TABLE IF NOT EXISTS materiais (\n  id VARCHAR(36) PRIMARY KEY,\n  tipo VARCHAR(20) NOT NULL,\n  titulo VARCHAR(255) NOT NULL,\n  url TEXT NOT NULL,\n  owner_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (owner_id) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS questoes (\n  id VARCHAR(36) PRIMARY KEY,\n  fonte VARCHAR(100),\n  referencia_externa VARCHAR(100),\n  disciplina_id VARCHAR(36),\n  assunto_id VARCHAR(36),\n  texto_questao TEXT NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS metas_materiais (\n  id VARCHAR(36) PRIMARY KEY,\n  meta_id VARCHAR(36) NOT NULL,\n  material_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (meta_id) REFERENCES metas(id) ON DELETE CASCADE,\n  FOREIGN KEY (material_id) REFERENCES materiais(id) ON DELETE CASCADE,\n  UNIQUE KEY unique_meta_material (meta_id, material_id)\n);\n\nCREATE TABLE IF NOT EXISTS metas_questoes (\n  id VARCHAR(36) PRIMARY KEY,\n  meta_id VARCHAR(36) NOT NULL,\n  questao_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (meta_id) REFERENCES metas(id) ON DELETE CASCADE,\n  FOREIGN KEY (questao_id) REFERENCES questoes(id) ON DELETE CASCADE,\n  UNIQUE KEY unique_meta_questao (meta_id, questao_id)\n);\n\nCREATE TABLE IF NOT EXISTS audit_logs (\n  id VARCHAR(36) PRIMARY KEY,\n  actor_id VARCHAR(36) NOT NULL,\n  action VARCHAR(50) NOT NULL,\n  entity VARCHAR(50) NOT NULL,\n  entity_id VARCHAR(36) NOT NULL,\n  before_json JSON,\n  after_json JSON,\n  metadata JSON,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (actor_id) REFERENCES users(id),\n  INDEX idx_audit_entity (entity, entity_id),\n  INDEX idx_audit_actor (actor_id),\n  INDEX idx_audit_created (criado_em)\n);\n\nCREATE TABLE IF NOT EXISTS metas_batch_imports (\n  id VARCHAR(36) PRIMARY KEY,\n  plano_id VARCHAR(36) NOT NULL,\n  file_name VARCHAR(255) NOT NULL,\n  total_rows INT NOT NULL,\n  created_count INT NOT NULL,\n  duplicated_count INT NOT NULL,\n  invalid_count INT NOT NULL,\n  errors JSON,\n  uploaded_by_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (plano_id) REFERENCES planos_estudo(id) ON DELETE CASCADE,\n  FOREIGN KEY (uploaded_by_id) REFERENCES users(id)\n)",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3FZ1nxfVKsSpRCQ.c519e6f3483f --database E9go4Z3vKfQ64CyBjNz69u --execute CREATE TABLE IF NOT EXISTS materiais (\n  id VARCHAR(36) PRIMARY KEY,\n  tipo VARCHAR(20) NOT NULL,\n  titulo VARCHAR(255) NOT NULL,\n  url TEXT NOT NULL,\n  owner_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (owner_id) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS questoes (\n  id VARCHAR(36) PRIMARY KEY,\n  fonte VARCHAR(100),\n  referencia_externa VARCHAR(100),\n  disciplina_id VARCHAR(36),\n  assunto_id VARCHAR(36),\n  texto_questao TEXT NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS metas_materiais (\n  id VARCHAR(36) PRIMARY KEY,\n  meta_id VARCHAR(36) NOT NULL,\n  material_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (meta_id) REFERENCES metas(id) ON DELETE CASCADE,\n  FOREIGN KEY (material_id) REFERENCES materiais(id) ON DELETE CASCADE,\n  UNIQUE KEY unique_meta_material (meta_id, material_id)\n);\n\nCREATE TABLE IF NOT EXISTS metas_questoes (\n  id VARCHAR(36) PRIMARY KEY,\n  meta_id VARCHAR(36) NOT NULL,\n  questao_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (meta_id) REFERENCES metas(id) ON DELETE CASCADE,\n  FOREIGN KEY (questao_id) REFERENCES questoes(id) ON DELETE CASCADE,\n  UNIQUE KEY unique_meta_questao (meta_id, questao_id)\n);\n\nCREATE TABLE IF NOT EXISTS audit_logs (\n  id VARCHAR(36) PRIMARY KEY,\n  actor_id VARCHAR(36) NOT NULL,\n  action VARCHAR(50) NOT NULL,\n  entity VARCHAR(50) NOT NULL,\n  entity_id VARCHAR(36) NOT NULL,\n  before_json JSON,\n  after_json JSON,\n  metadata JSON,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (actor_id) REFERENCES users(id),\n  INDEX idx_audit_entity (entity, entity_id),\n  INDEX idx_audit_actor (actor_id),\n  INDEX idx_audit_created (criado_em)\n);\n\nCREATE TABLE IF NOT EXISTS metas_batch_imports (\n  id VARCHAR(36) PRIMARY KEY,\n  plano_id VARCHAR(36) NOT NULL,\n  file_name VARCHAR(255) NOT NULL,\n  total_rows INT NOT NULL,\n  created_count INT NOT NULL,\n  duplicated_count INT NOT NULL,\n  invalid_count INT NOT NULL,\n  errors JSON,\n  uploaded_by_id VARCHAR(36) NOT NULL,\n  criado_em TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (plano_id) REFERENCES planos_estudo(id) ON DELETE CASCADE,\n  FOREIGN KEY (uploaded_by_id) REFERENCES users(id)\n)",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1092
}